<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
   PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
   "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.iclass.spring_4restapi.mapper.CustomerMapper">
<!-- 
	idëŠ” sql ì„ ì°¾ëŠ” ì‹ë³„ê°’.(ê°œë°œìž ì •ì˜) 
    Mybatis-Spring ì€ namespace ë¥¼ ë°˜ë“œì‹œ ì¸í„°íŽ˜ì´ìŠ¤ì˜ "íŒ¨í‚¤ì§€ì´ë¦„.ì¸í„°íŽ˜ì´ìŠ¤ì´ë¦„"  ë¡œ í•©ë‹ˆë‹¤.
	ì¸í„°íŽ˜ì´ìŠ¤ì˜ êµ¬í˜„ì²´(í•´ë‹¹ í´ëž˜ìŠ¤ë¡œ ë§Œë“¤ì–´ì§„ ê°ì²´)ë¥¼ ë§Œë“¤ ë•Œ sql ì´ ë§¤í•‘ ë  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.
-->
	<select id="selectByPk" parameterType="String" resultType="CustomerDto">
	<!-- ë§¤ê°œë³€ìˆ˜ì˜ ê°’ì€ íƒ€ìž…ê³¼ ì´ë¦„ìœ¼ë¡œ ë§¤í•‘ -->
		select * from tbl_customer#
		where customer_id=#{customerId}
	</select>

	<select id="selectAll" resultType="CustomerDto">
	<!-- nê°œ í–‰ì´ì§€ë§Œ resultType ì— List ë¥¼ ì“°ì§€ ì•Šê³  Generic Type ë§Œ ì„¤ì •  -->
		select * from tbl_customer# order by customer_id
	</select>

	<!-- insert, update, delete ëŠ” resultType ì´ ì—†ìŠµë‹ˆë‹¤. dao ì—ì„œëŠ” preparedStatement ì²˜ëŸ¼ ë¦¬í„´ ìžˆìŒ.  -->
	<!-- insert, update, delete ì˜ ë¦¬í„´ íƒ€ìž…ì€ int (insert, update, delete ìˆ˜í–‰í•œ í–‰ì˜ ê°¯ìˆ˜) -->
	<insert id="insert" parameterType="CustomerDto">
	<!-- ë§¤ê°œë³€ìˆ˜ì˜ ì´ë¦„ì€ vo ê°ì²´ì˜ getter ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤. (getXXXX) XXXX ì´ ë§¤ê°œë³€ìˆ˜ ì´ë¦„.(3.4 ì´ì „ë²„ì „)
	     ê·¸ ì´í›„ëŠ” ì§ì ‘ í•„ë“œëª…ìœ¼ë¡œ ì ‘ê·¼í•´ì„œ ê°€ì ¸ì˜¨ë‹¤.ðŸ”¥ vo í´ëž˜ìŠ¤ì— ì„ ì–¸ëœ í•„ë“œ(ë³€ìˆ˜)ëª…ì„ ë§¤ê°œë³€ìˆ˜ ì´ë¦„ìœ¼ë¡œ 'ê¼­' í•©ë‹ˆë‹¤.
	-->
		insert into tbl_customer# (customer_id,name,email,age,reg_date) 
                    values (#{customerId}, #{name}, #{email}, #{age}, sysdate)
	</insert>

	<update id="update" parameterType="CustomerDto">
		update tbl_customer#
		set email = #{email}, age = #{age} 
		where customer_id = #{customerId}
	</update>
	
	<delete id="delete" parameterType="String">
		delete from tbl_customer# 
			where customer_id = #{customerId}
	</delete>
</mapper>  
<!-- 
âœ… parameterType, resultType ì´ í´ëž˜ìŠ¤ì¼ ë•Œ, "íŒ¨í‚¤ì§€ì´ë¦„.í´ëž˜ìŠ¤ì´ë¦„" ìœ¼ë¡œ í•´ì•¼ í•©ë‹ˆë‹¤.
- CustomerVo ëŠ” TypeAlias(ë³„ì¹­) ë¥¼ ì„¤ì •í•˜ê³  ì‚¬ìš© ì¤‘ì´ë©° ê·¸ë ‡ì§€ ì•Šë‹¤ë©´ mybatis.vo.CustomerVo ë¡œ í•´ì•¼ í•©ë‹ˆë‹¤.
String ì€ ê¸°ë³¸ íŒ¨í‚¤ì§€ java.lang ì— ì†í•˜ëŠ” í´ëž˜ìŠ¤ì´ë¯€ë¡œ ìƒëžµí•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.
- ê¸°ë³¸í˜• íƒ€ìž…ì€ â­• https://mybatis.org/mybatis-3/ko/configuration.html íŽ˜ì´ì§€ ì¤‘ê°„ ë³„ì¹­ê³¼ ë§¤í•‘ëœ íƒ€ìž… ì°¸ê³ 
- (3.2ë²„ì „ ì´í›„ì—ëŠ” jdk í´ëž˜ìŠ¤ì˜ map ë“±ì˜ ë³„ì¹­ì´ ì‚¬ìš© ê°€ëŠ¥í•¨.)
parameterType="map" ë˜ëŠ” "list" ë˜ëŠ” "collection"
resultType="map" 
-->

<!-- 
${}  : jspì—ì„œ getAttribute ì—­í• 
       ë¬¸ìžì—´ ê¸°í˜¸ ' ' ê°€ ìžë™ìœ¼ë¡œ ìƒê¸°ì§€ ì•ŠìŠµë‹ˆë‹¤.
#{}  : ë§¤í¼ XML ì—ì„œ íŒŒë¼ë¯¸í„° ê¸°í˜¸
       ë¬¸ìžì—´ ê¸°í˜¸ ' ' ê°€ ìžë™ìœ¼ë¡œ ìƒê¹ë‹ˆë‹¤.
 -->
